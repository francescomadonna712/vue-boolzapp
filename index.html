<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://unpkg.com/vue@3.4.27/dist/vue.global.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boolzapp</title>
</head>

<body>

    <div id="app">
        <main>
            <div class="container-fluid">

                <div class="screen">
                    <!-- colonna sinistra -->
                    <section class="col-4 left-part">
                        <!-- user -->
                        <div class="user">
                            <div class="name-pic">
                                <img src="./img/avatar_io.jpg" alt="user">
                                <h4>Erminia</h4>
                            </div>
                            <!-- icone-->
                            <div class="user-icons">
                                <a href="#">
                                    <i class="icon-clr fa-solid fa-circle-notch"></i>
                                </a>
                                <a href="#">
                                    <i class="icon-clr fa-solid fa-message"></i>
                                </a>
                                <a href="#">
                                    <i class="icon-clr fa-solid fa-ellipsis-vertical"></i>
                                </a>
                            </div>
                        </div>
                        <!-- Alert -->
                        <div class="alert">
                            <div class="alert-icon">
                                <i class="fa-solid fa-bell-slash"></i>
                            </div>
                            <div class="alert-text ">
                                <h6>Ricevi notifiche di nuovi messaggi</h6>
                                <a href="#">Attiva notifiche desktop</a>
                            </div>
                        </div>
                        <!-- barra di ricerca -->
                        <div class="bar">

                            <i class="fa-solid fa-magnifying-glass"></i>
                            <input 
                            v-model="newSearch" 
                            @keyup="findFriend" 
                            type="text" 
                            placeholder=" Cerca o inizia una nuova chat">
                        </div>
                        
                        <!-- Contatti -->
                        <div class="contacts">
                            <!-- ciclo v for per lista contatti -->
                            <div v-for="(item, i, array) in contacts" class="name-pic card-c" :key="i"
                                @click="clickContact(i)"
                                :class="[i === activeChat ? 'active' : '', item.visible === false ? 'no-display' : ''] ">
                                <img :src="item.avatar" :alt="item.name">
                                <!-- username -->
                                <div class="usernamemsg">
                                    <h5>{{item.name}}</h5>
                                    <span>{{item.messages[item.messages.length - 1].message}}</span>
                                    <!-- orario -->
                                </div>
                                <div class="msg-hour">
                                    <span>{{item.messages[item.messages.length - 1].date}}</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- colonna destra -->
                    <section class="col-8 right-part">
                        <!-- user -->
                        <div class="user">
                            <div class="name-pic">

                                <img :src="contacts[activeChat].avatar" alt="contacts[activeChat].name">

                                <div>

                                    <h4>{{contacts[activeChat].name}}</h4>
                                    <span>Ultimo accesso oggi alle:12:00 </span>
                                </div>

                            </div>
                            <!-- icone -->
                            <div class="user-icons">
                                <a href="#">
                                    <i class="icon-clr fa-solid fa-magnifying-glass"></i>
                                </a>
                                <a href="#">
                                    <i class="icon-clr fa-solid fa-paperclip"></i>
                                </a>
                                <a href="#">
                                    <i class="icon-clr fa-solid fa-ellipsis-vertical"></i>
                                </a>
                            </div>
                        </div>
                        <!-- chat -->
                        <div class="chat">
                            <div class="msg-line" v-for="(item2, j) in contacts[activeChat].messages" :key="j"
                                :class="item2.status === 'sent' ? 'sent-position' : '' ">
                                <div class="chat-box"
                                    :class="item2.status === 'sent' ? 'sent-color' : 'received-color' ">

                                    <div class="msg-box">
                                        <p>
                                            {{item2.message}}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Your chat -->
                        <div class="write bar">

                            <a href="#">

                                <i class="fa-regular fa-face-smile"></i>
                            </a>
                            <input v-model="newMessage" @keyup.enter="addMessage" type="text"
                                placeholder=" Scrivi un messaggio">
                            <a href="#">
                                <i class="fa-solid fa-microphone"></i>
                            </a>
                        </div>
                    </section>


                    <!-- fine colonne -->
                </div>
            </div>





        </main>


















    </div>
    <script src="./js/main.js"></script>
</body>

</html>